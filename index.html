<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>FCS AI Generator Suite</title>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
  :root { --bg:#ffffff; --fg:#111; --muted:#666; --border:#d0d0d0; --accent:#0057d9; --primary-blue:#0b5cff; }
  body { background: var(--light-gray-bg, #f8f9fa); color: var(--fg); font-family: Calibri, Arial, sans-serif; font-size: 15px; margin:0; }
  .fcs-wrap { max-width: 980px; margin: 28px auto; padding: 0 16px; }
  h1 { font-size: 28px; font-weight:700; text-align:center; margin-bottom: 28px;}
  h2 { font-size: 20px; font-weight:700; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
  .fcs-card { border:1px solid var(--border); border-radius: 12px; padding: 24px; background:#fff; margin-bottom: 20px; }
  label { font-weight: 600; font-size: 14px; display: block; margin-bottom: 6px; }
  input[type="text"], select, input[type="number"], textarea { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 8px; background: #fff; font-size:15px; box-sizing:border-box; }
  input:disabled { background-color: #f8f9fa; }
  .hint, .small { font-size: 12px; color: var(--muted); margin-top: 4px; }
  button { padding: 10px 16px; border-radius: 8px; border:1px solid var(--border); background:#f6f8fb; cursor: pointer; font-weight: 600; font-size:15px; transition: all 0.2s; }
  button.primary { background: var(--primary-blue); color: #fff; border-color: var(--primary-blue); }
  button:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
  button:disabled { cursor: not-allowed; opacity: 0.6; }
  .fcs-tabs { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
  .fcs-tab-btn { flex-grow: 1; text-align: center; } .fcs-generator { display: none; } .fcs-generator.active { display: block; }
  .grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 16px; align-items: end; }
  .six { grid-column: span 6; } .twelve { grid-column: span 12; }
  .grid-2 { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; } .grid-full { grid-column: 1 / -1; }
  .actions { display: flex; gap: 10px; flex-wrap: wrap; margin-top:20px; }
  .status { margin-top:10px; min-height:1.5em; text-align:left; color:var(--muted); font-size:13px; }
  .output-container { border:1px solid var(--border); border-radius:12px; padding:24px; background:#fdfdfd; min-height: 200px; margin-top:20px; }
  .output-container h1, .output-container h2 { text-align: center; color: #000 !important;}
  .output-container table { width:100%; border-collapse: collapse; margin-top: 12px; font-size:10pt;}
  .output-container th, .output-container td { border:1px solid #ccc; padding:6px; vertical-align:top; } .output-container th { background: #f4f4f4; }
  .output-container .en { color: #0057d9; font-weight: bold; } .output-container .es { color: #c00000; font-weight: bold; }
  .output-container .ans-en { color: #0057d9; font-style: italic; } .output-container .ans-es { color: #c00000; font-style: italic; }
  .output-container .subcategory td { background: #e0e0e0; font-weight: bold; text-align: left; }
  @media (max-width: 860px){ .six, .twelve { grid-column: span 12; } .grid-2{grid-template-columns:1fr;} }
</style>
</head>
<body>
<div class="fcs-wrap">
    <h1>FCS AI GENERATOR SUITE</h1>
    <div class="fcs-tabs">
        <button id="tab-vocab" class="fcs-tab-btn primary">Vocabulary</button>
        <button id="tab-convo" class="fcs-tab-btn">Conversation</button>
        <button id="tab-test" class="fcs-tab-btn">Test</button>
    </div>
    <div id="gen-vocab" class="fcs-generator active">
        <div class="fcs-card">
            <h2>Vocabulary Creator</h2>
            <div class="grid">
              <div class="six"><label for="v-topic">Topic</label><input id="v-topic" type="text" value="At the Airport"></div>
              <div class="six"><label for="v-level">Level</label><select id="v-level"><option value="1">Level 1</option><option value="2">Level 2</option><option value="3" selected>Level 3</option><option value="4">Level 4</option><option value="5">Level 5</option></select></div>
              <div class="six"><label for="v-tmode">Total Words Mode</label><select id="v-tmode"><option value="default" selected>Preset by Level</option><option value="custom">Custom</option></select><div id="v-presetText" class="hint"></div></div>
              <div class="six"><div class="grid"><div class="six"><label for="v-tmin">Min</label><input id="v-tmin" type="number" min="1" disabled></div><div class="six"><label for="v-tmax">Max</label><input id="v-tmax" type="number" min="1" disabled></div></div></div>
              <div class="twelve"><label for="v-vocab-include">Vocabulary to Include (optional)</label><textarea id="v-vocab-include" rows="3"></textarea></div>
            </div>
            <div class="actions"><button id="v-gen" class="primary">Generate Vocabulary</button><button id="v-copy">Copy HTML</button><div id="v-status" class="status"></div></div>
        </div>
        <div id="v-output" class="output-container"><p>Your vocabulary list will appear here...</p></div>
    </div>
    <div id="gen-convo" class="fcs-generator">
        <div class="fcs-card">
            <h2>Conversation Creator</h2>
            <div class="grid-2">
              <div class="grid-full"><label>Topic</label><input id="c-topic" value="A trip to the beach" type="text"/></div>
              <div><label>Level</label><select id="c-level"><option value="1">Level 1</option><option value="2" selected>Level 2</option><option value="3">Level 3</option><option value="4">Level 4</option><option value="5">Level 5</option></select></div>
              <div><label>Tone</label><select id="c-tone"><option>Neutral, casual</option><option>Informal, friendly</option></select></div>
              <div class="grid-full"><label>Vocabulary (Optional)</label><textarea id="c-vocab" rows="4"></textarea></div>
              <div><label># Convos</label><input id="c-numConvos" type="number" value="1"/></div>
              <div><label># Speakers</label><input id="c-numSpeakers" type="number" value="2"/></div>
              <div><label>Add Fill-In-The-Blank?</label><select id="c-addFib"><option value="no">No</option><option value="yes" selected>Yes</option></select></div>
              <div><label>FIB Focus</label><select id="c-fibFocus"><option>Mixed</option><option>Verbs only</option></select></div>
            </div>
            <div class="actions"><button id="c-gen" class="primary">Generate</button><button id="c-copy">Copy</button><div id="c-status" class="status"></div></div>
        </div>
        <div id="c-output" class="output-container"><p>Your conversation will appear here...</p></div>
    </div>
    <div id="gen-test" class="fcs-generator">
        <div class="fcs-card">
            <h2>Test Creator</h2>
            <div><label for="t-vocab">Vocabulary List</label><textarea id="t-vocab" rows="6"></textarea></div>
            <div><label for="t-level">Level</label><select id="t-level"><option value="1">Level 1</option><option value="2" selected>Level 2</option><option value="3">Level 3</option><option value="4">Level 4</option><option value="5">Level 5</option></select></div>
            <div><label><input type="checkbox" id="t-anskeys" checked> Include Answer Keys?</label></div>
            <div class="actions"><button id="t-gen" class="primary">Generate</button><button id="t-copy">Copy</button><div id="t-status" class="status"></div></div>
        </div>
        <div id="t-output" class="output-container"><p>Your test will appear here...</p></div>
    </div>
</div>
<script>
"use strict";
(function(){
    const $=id=>document.getElementById(id);const API_URL="/api/index";
    (function(){const e=document.querySelectorAll(".fcs-tab-btn"),t=document.querySelectorAll(".fcs-generator");e.forEach(o=>{o.addEventListener("click",()=>{const n=o.id.replace("tab-","gen-");e.forEach(e=>e.classList.remove("primary")),o.classList.add("primary"),t.forEach(e=>{e.style.display=e.id===n?"block":"none"})})})})();
    async function generateResult(e,t,o,n){t.disabled=!0,o.textContent="Generating... This can take up to a minute.",n.innerHTML="<h4>Please wait. The AI is crafting your content...</h4>";try{const c=await fetch(API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e})}),s=await c.json();if(!c.ok)throw new Error(s.details||s.error||"An unknown server error.");n.innerHTML=s.content,o.textContent="Generation successful!"}catch(c){console.error("Error:",c),n.innerHTML=`<p style="color:red;"><strong>Error:</strong> Failed to generate content. Details: ${c.message}</p>`,o.textContent="An error occurred."}finally{t.disabled=!1}}
    function copyToClipboard(e,t){if(!e.innerHTML||e.innerText.includes("will appear here")){t.textContent="Nothing to copy.";return}navigator.clipboard.writeText(e.innerHTML).then(()=>t.textContent="Copied!",()=>t.textContent="Copy failed.")}
    (function(){const e=$("v-gen"),t=$("v-copy"),o=$("v-status"),n=$("v-output"),c=$("v-level"),s=$("v-tmode"),i=$("v-tmin"),a=$("v-tmax"),l=$("v-presetText"),r=$("v-topic"),u=$("v-vocab-include"),d={1:{min:35,max:55},2:{min:60,max:85},3:{min:90,max:120},4:{min:120,max:180},5:{min:160,max:240}},p={1:"Level 1—Survival",2:"Level 2—Beginner",3:"Level 3—Intermediate",4:"Level 4—Conversational",5:"Level 5—Fluent"};function m(){const e="custom"===s.value,t=d[c.value];i.disabled=!e,a.disabled=!e,e||(i.value=t.min,a.value=t.max),l.textContent=`Preset for ${p[c.value]}: ${t.min}–${t.max} words.`}s.addEventListener("change",m),c.addEventListener("change",m),e.addEventListener("click",()=>{if(!r.value.trim()){o.textContent="Please enter a topic.";return}const t=`OUTPUT CONTRACT: You must respond with a single, complete HTML file with embedded styles. Do not include markdown or any commentary. Adhere to all rules from the FCS VOCABULARY CREATOR documentation exactly. The output MUST be ready to display directly in a browser.

--- USER INPUT ---
Topic: ${r.value}
Level: ${c.value}
Total Words Mode: ${s.value}
Min Words: ${i.value}
Max Words: ${a.value}
Vocabulary to Include: ${u.value||"None"}`;generateResult(t,e,o,n)}),t.addEventListener("click",()=>copyToClipboard(n,o)),m()})();
    (function(){const e=$("c-gen"),t=$("c-copy"),o=$("c-status"),n=$("c-output");e.addEventListener("click",()=>{if(!$("c-topic").value.trim()){o.textContent="Please enter a topic.";return}const t=`OUTPUT CONTRACT: You must respond with a single, complete HTML file. Follow all rules from the FCS CONVERSATION CREATOR documentation exactly. Key Rules: Format conversations and practices in two columns. Bold and color vocabulary. Use the ________ (ENGLISH) format for Fill-in-the-Blanks. \n\n--- USER INPUT ---\nTopic: ${$("c-topic").value}\nLevel: ${$("c-level").value}\nVocabulary List: ${$("c-vocab").value||"auto"}\nNum Convos: ${$("c-numConvos").value}\nNum Speakers: ${$("c-numSpeakers").value}\nAdd FIB: ${$("c-addFib").value}\nFIB Focus: ${$("c-fibFocus").value}\nTone: ${$("c-tone").value}`;generateResult(t,e,o,n)}),t.addEventListener("click",()=>copyToClipboard(n,o))})();
    (function(){const e=$("t-gen"),t=$("t-copy"),o=$("t-status"),n=$("t-content");e.addEventListener("click",()=>{if(!$("t-vocab").value.trim()){o.textContent="Please paste a vocabulary list.";return}const t=`OUTPUT CONTRACT: Create a 3-part Spanish test as a single HTML file. Follow all rules from the FCS TEST CREATOR documentation precisely. Key Rules: Return ONLY raw HTML. Structure MUST be Part 1 (ES->EN), Part 2 (EN->ES), Part 3 (Oral Prompts). Use ONLY provided vocab and level-grammar.\n\n--- USER INPUT ---\nLevel: ${$("t-level").value}\nInclude Answer Keys: ${$("t-anskeys").checked}\nVocabulary List:\n${$("t-vocab").value}`;generateResult(t,e,o,n)}),t.addEventListener("click",()=>copyToClipboard(n,o))})();
})();
</script>
</body>
</html>
